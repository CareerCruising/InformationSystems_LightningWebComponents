<template>
    <lightning-spinner if:false={data.IsLoaded} size="medium" alternative-text="Loading"></lightning-spinner>
    <div class="slds-p-left_xx-small">
        <div class="MyDropDown">
            <lightning-input type="text" value={ac.CurrentOption.label} onkeyup={SearchKeyUp} placeholder="Type object name..." class="slds-p-bottom_xx-small"></lightning-input>
            <div if:true={ac.Visible} class="slds-dropdown slds-dropdown_left">
                <ul class="slds-dropdown__list" role="menu" aria-label="Show More">
                    <template for:each={ac.FilteredOptions} for:item="row">
                        <li key={row.label} class="slds-dropdown__item" role="presentation">
                            <a role="menuitem" onclick={SetCurrentOption} data-option={row.label}>{row.label}</a>
                        </li>
                    </template>
                </ul>
            </div>
        </div>
    </div>

    <template if:true={data.SfField}>
        <table class="table-sticky slds-table slds-table_cell-buffer slds-table_bordered slds-table_fixed-layout">
            <thead>
                <tr>
                    <th style="width:20%">
                        <div class="HoverLink" onclick={sort} data-sortname="label">Label</div>
                        <div onclick={sort} data-sortname="name" class="text-grey slds-text-body_small HoverLink">Name</div>
                    </th>
                    <th style="width:10%" class="HoverLink" onclick={sort} data-ascending="true" data-sortname="type">Type</th>
                    <th style="width:20%" class="HoverLink" onclick={sort} data-ascending="true" data-sortname="calculated">Calculated</th>
                    <th style="width:50%" class="HoverLink" onclick={sort} data-ascending="true" data-sortname="inlineHelpText">HelpText</th>
                </tr>
            </thead>
            <tbody>
                <template for:each={data.SfField} for:item="field">
                    <tr key={field.name}>
                        <td class="ClickableLink" onclick={ShowOther} data-id={field.name}>
                            <div class="ClickableLink" onclick={ShowOther} data-id={field.name}>{field.label}</div>
                            <div class="text-grey slds-text-body_small">{field.name}</div>
                        </td>
                        <td>
                            {field.type}
                            <div class="text-grey slds-text-body_small">{field.byteLength} bytes</div>
                            <!-- <lightning-icon icon-name="utility:right" alternative-text="Expand" size="x-small" title="Expand" onclick={ShowOther} data-id={field.name}></lightning-icon>
                            <template for:each={field.fieldArray} for:item="attr" if:false={field.Hidden}>
                                <div key={attr.key}>
                                    <div>
                                        {attr.key}: {attr.value}
                                    </div>
                                </div>            
                            </template> -->
                        </td>
                        <td>
                            {field.calculated}
                            <div class="text-grey slds-text-body_small" if:true={field.FormulaExists}>
                                <p class="slds-truncate" title={field.calculatedFormula}>{field.calculatedFormula}</p>
                            </div>
                        </td>
                        <td>
                            <div class="slds-cell-wrap">{field.inlineHelpText}</div>
                            <!-- <div class="slds-truncate" title={field.inlineHelpText}>{field.inlineHelpText}</div> -->
                        </td>                        
                    </tr>            
                </template>
            </tbody>                                 
        </table>


    </template>  

	<template if:true={toggle.ModalOther}>
		<section class="slds-modal slds-fade-in-open slds-modal_large">
			<div class="slds-modal__container">
				<!-- HEADER -->
				<header class="slds-modal__header" style="background-color:#F3F3F3;">
					<h2 class="slds-text-heading_medium slds-hyphenate">
						<span class="slds-p-left_medium">{data.CurrentField.name}</span>
					</h2>
				</header>

				<!-- BODY -->
				<div class="slds-modal__content slds-p-around_medium">
					<pre>{data.CurrentField.Pretty}</pre>
				</div>
				<!-- FOOTER -->
				<footer class="slds-modal__footer">
					<button class="slds-button slds-button_brand" onclick={ToggleAnything} data-togglename="ModalOther" title="Close">Close</button>
				</footer>
			</div>
		</section>
		<div class="slds-backdrop slds-backdrop_open"></div>
	</template>    
</template>